%\PassOptionsToPackage{gray}{xcolor}
\documentclass[hyperref={pdfpagelabels=false},12pt]{beamer}
\setbeamertemplate{frametitle}[default][center]
\mode<presentation>
{
 \usetheme{Warsaw}      % or try Darmstadt, Madrid, Warsaw, ...
 \usecolortheme{default} % or try albatross, beaver, crane, ...
 \usefonttheme{default}  % or try serif, structurebold, ...
 \setbeamertemplate{footline}[frame number]
 \setbeamertemplate{caption}[numbered]
} 

\usepackage[utf8]{inputenc}
\usepackage{mathtools}
\usepackage{bm}
\usepackage{helvet}
\usepackage{listings}
\usepackage{gensymb}
\usepackage{array}
\usepackage{times}
\usepackage{xcolor}
\usepackage{default}
\usepackage{ulem}
\usepackage{minted}
\usepackage{hyperref}

% Great Commands
\newcommand{\ig}[2]{\includegraphics[width=#1\linewidth]{#2}}
\newcommand{\mybutton}[2]{\hyperlink{#1}{\beamerbutton{{#2}}}}
\newcommand{\myvbutton}[2]{\vfill\hyperlink{#1}{\beamerbutton{{#2}}}}

% Color Scheme
\definecolor{pittblue}{RGB}{28,41,87}
\definecolor{pittgold}{RGB}{205,184,125}
\setbeamercolor{structure}{fg=pittgold}
\setbeamercolor{button}{bg=pittblue}

\xdefinecolor{darkgreen}{rgb}{0.11,0.64,0.22}
\title[Basic Unix/Linux]{{Basic Linux}}
\author[Basic Unix/Linux]{{\textbf{Barry} (bmooreii), Fangping (fangping), Kim (kimwong), Ketan (ketan)}}
\institute[SaM]{Center for Simulation and Modeling}
\date{}

\beamertemplatenavigationsymbolsempty

\begin{document}

\begin{frame}[label=started]{Getting Started}
    \begin{itemize}
        \item Download the slides from: \url{https://pitt.box.com/v/basic-linux-slides}
        \item Log into the cluster, or
        \item If you don't have access to the cluster, download Git
        \begin{itemize}
            \item Windows: install from \url{https://git-scm.com/downloads}
            \item Mac: install from \url{https://git-scm.com/downloads}, port or brew
            \item Linux: install from package manager
        \end{itemize}
        \item Open Putty/Git bash (Windows) or Terminal Emulator (Mac/Linux)
    \end{itemize}
\inputminted[bgcolor=lightgray,linenos,fontsize=\scriptsize]{bash}{code/getting-started.txt}
\myvbutton{navigate}{a clickable button}
\end{frame}

\begin{frame}[plain]
\titlepage
\end{frame}

\begin{frame}{Schedule}
\begin{itemize}
    \item Today: Basic Linux
    \item Wednesday 10/12 (8am -- 11am): SaM Cluster Usage
    \item Thursday 10/27 (10am -- 12pm): Linux Power Tools
    \item Thursday 11/10 (1:30pm -- 3:30pm): Python Programming
    \item Thursday 12/1 (8:00am -- 12:00pm): R Programming
\end{itemize}
\end{frame}

\begin{frame}{What will you learn today?}
    \begin{itemize}
        \item Quick introduction to Linux command line tools relating to:
        \begin{itemize}
            \item general purpose utilities
            \item navigating file systems
            \item handling files
            \item the linux environment
            \item basic filters
            \item remote operations and copying files
        \end{itemize}
        \item Present tools and concepts for bash scripting
    \end{itemize}
\end{frame}

\begin{frame}{What do we expect from you?}
    \begin{itemize}
        \item You have access to our cluster, or a command line
        \item You are following along with the code
        \item Code snippets:
        \begin{itemize}
            \item Lines which begin with \texttt{\$} are commands with, or without, arguments
            \item Lines which begin with \texttt{\$ \#} are comments
            \item \texttt{\textless something\textgreater} means I want input from you
            \item All other lines are output from those commands
        \end{itemize}
        \item Mantras:
        \begin{itemize}
            \item Tab completion is your friend
            \item You are always typing too much
            \item If you plan to do it more than once, write a script
        \end{itemize}
        \item \color{red}{Type what you see, experiment!}
    \end{itemize}
\end{frame}

\begin{frame}{Text Editors}
    \begin{itemize}
        \item Use which one you like (\texttt{vim, emacs, nano, gedit}) 
        \item Similarly to Linux, an editor is a tool which takes time to learn
        \item I was told to use Vim when I started, therefore I use Vim
        \item My PhD advisor uses Emacs, we are still friends
        \item Any interest in a Vim presentation?
    \end{itemize}
\end{frame}

\begin{frame}[label=general-1]{General-purpose utilities}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/general-purpose-utilities-1.txt}
\vfill
\mybutton{exercises-1}{Exercises (1)} \mybutton{exercises-2}{Exercises (2)}
\end{frame}

\begin{frame}[label=general-2]{General purpose utilities cont.}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/general-purpose-utilities-2.txt}
\myvbutton{exercises-1}{Exercises (1)}
\end{frame}

\begin{frame}[label=navigate]{Navigate the Filesystem}
\mybutton{started}{change directory}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/navigate-the-filesystem-1.txt}
\end{frame}

\begin{frame}[label=find]{The find command}
\begin{itemize}
    \item \texttt{.} means current directory (\texttt{\$PWD})
    \item \texttt{..} means parent directory
    \item \texttt{\textasciitilde} means home directory (\texttt{\$HOME})
    \item \texttt{-} means previous directory (\texttt{\$OLDPWD})
\end{itemize}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/navigate-the-filesystem-2.txt}
\myvbutton{exercises-2}{Exercises (2)}
\end{frame}

\begin{frame}[label=space]{How much space?}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/navigate-the-filesystem-3.txt}
\myvbutton{exercises-3}{Exercises (3)}
\end{frame}

\begin{frame}[label=handle]{Handling files}
%less, more, cat, wc, chmod, chown, umask, tar, gzip, gunzip
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/handling-files-1.txt}
\end{frame}

\begin{frame}[label=permissions]{Handling files: Permissions}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/handling-files-2.txt}
\begin{center}
    \ig{0.75}{images/permissions.png}
\end{center}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/handling-files-3.txt}
\vfill
\mybutton{exercises-2}{Exercises (2)} \mybutton{exercises-3}{Exercises (3)}
\end{frame}

\begin{frame}[label=cut-and-paste]{Handling files: ``cut and paste'' operations}
% cat, table, cut, paste
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/handling-files-4.txt}
\vfill
\mybutton{exercises-3}{Exercises (3)} \mybutton{exercises-4}{Exercises (4)}
\end{frame}

\begin{frame}[label=environment]{The Environment}
%aliases, ps, export, history, PS1
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/the-environment-1.txt}
\myvbutton{exercises-1}{Exercises (1)}
\end{frame}

\begin{frame}[label=alias]{Aliasing -- Shortcuts}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/the-environment-2.txt}
\begin{itemize}
    \item \color{red}{Don't use these for ssh!}
    \item \color{red}{Don't use these in scripts!}
\end{itemize}
\end{frame}

\begin{frame}{History}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/the-environment-3.txt}
\begin{itemize}
    \item Good reference: \url{http://www.thegeekstuff.com/2011/08/bash-history-expansion/}
\end{itemize}
\end{frame}

\begin{frame}[label=head-tail]{Filters: head, tail}
%head, tail, sort, column, uniq, tr, cut, paste 
%awk, sed, grep
\begin{itemize}
    \item Filters are Linux power tools
\end{itemize}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/simple-filters-1.txt}
\end{frame}

\begin{frame}[label=sort-uniq-tr]{Filters: sort, uniq, tr}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/simple-filters-2.txt}
\end{frame}

\begin{frame}[label=grep-awk-sed]{Filters: grep, awk, sed}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/simple-filters-3.txt}
\end{frame}

\begin{frame}[label=lynyrd]{The Lynyrd Skynyrd Filter}
\begin{itemize}
    \item Southern Rock Band, `y' is their vowel of choice.
    \item Replace all of the vowels in `doctored.txt' with `y'
\end{itemize}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/simple-filters-4.txt}
\begin{itemize}
    \item Try this filter on `names.txt', is the behavior expected?
\end{itemize}
\end{frame}

\begin{frame}[label=wildcards]{The Shell: Wildcards}
\begin{itemize}
    \item You are working in a ``shell'' right now!
    \item This one is Bash, but others exist.
\end{itemize}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/shell-1.txt}
%wildcards, escaping and quoting, redirection, tee
\myvbutton{exercises}{Exercises (2)}
\end{frame}

\begin{frame}[label=redirection]{The Shell: Redirection}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/shell-2.txt}
\end{frame}

\begin{frame}[label=ssh]{Remote Connectivity and Networks}
%ssh, scp, rsync, ftp, curl
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/ssh-config-1.txt}
\end{frame}

\begin{frame}[label=compression]{Compression}
\begin{itemize}
    \item \texttt{gzip} is the standard compression tool
    \item \texttt{tar} is an archiving tool
\end{itemize}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/compression-1.txt}
\end{frame}

\begin{frame}{``Scripts''}
    \begin{itemize}
        \item Example SLURM script
    \end{itemize}
\inputminted[bgcolor=lightgray,linenos,fontsize=\footnotesize]{bash}{code/benzene.slurm}
\end{frame}

\begin{frame}{Are you overwhelmed?}
    \begin{itemize}
        \item Post a ticket and ask for help: \url{http://core.sam.pitt.edu/support-howto}
        \item SaM has an open door policy!
        \item Office Hours:
        \begin{itemize}
            \item Monday/Friday 11AM--12PM Benedum 1144
            \item Tuesday 2--3PM Benedum 1145 
            \item Doesn't work for you? Come bug us!
            \item Want to learn something specific? Set up a tutorial!
        \end{itemize}
        \item Town Hall (Open Forum):
        \begin{itemize}
            \item First Thursday of the Month 11am-12pm in Benedum 1145
        \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}{Questionnaire}
    \begin{itemize}
        \item At some point I will send a questionnaire to participants
        \item I would love your feedback
    \end{itemize}    
\end{frame}

\begin{frame}{Exercises Preparation}
    \begin{itemize}
        \item Navigate to the \texttt{exercises} directory
        \item Button navigation in slides to-and-from questions/hints.
        \item Don't hesitate to ask questions, that's why we are here!
        \item There are no exercises for Bash history, try using it anyway
    \end{itemize}
\end{frame}

\begin{frame}[label=exercises-1]{Exercises (1)}
\begin{itemize}
    \item Print system information on cluster (\mybutton{general-1}{hint})
    \item Print your username using environment variables to the command line
    (\mybutton{environment}{hint})
    \item Why was I getting the wrong answer for $\pi*\sqrt{2}$? Hint: use the
    man page, look for ``scale'' under the ``VARIABLES'' section. The definition
    of scale is located in the ``NUMBERS'' section. Don't forget ``/'' searches.
    (\mybutton{general-2}{hint})
    \item What is $\pi$ using the formula $\pi=4\times\arctan(1)$? Hint: use
    man page to activate the ``standard math library'' and determine the
    $\arctan$ function. Don't forget ``/'' searches!
    (\mybutton{general-2}{hint})
    \item How long does the calculation take? (\mybutton{general-2}{hint})
\end{itemize}
\end{frame}

\begin{frame}[label=exercises-2]{Exercises (2)}
    \begin{itemize}
        \item Starting from your home directory, find all files (\mybutton{find}{hint}):
        \begin{itemize}
            \item Ending in \texttt{.txt} or \texttt{.sh} (\mybutton{wildcards}{hint})
            \item Files which \textbf{only} you can read, write, and execute
            \begin{itemize}
                \item \mybutton{permissions}{hint}, try searching for
                ``permissions'' in man page
            \end{itemize}
            \item Files modified yesterday (hint: search for ``atime'' in man page)
        \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}[label=exercises-3]{Exercises (3)}
    \begin{itemize}
        \item Which login node are you on? (\mybutton{general-1}{hint})
        \item How much RAM is free on the machine? (\mybutton{space}{hint})
        \item How much space does mobydisk have left? (\mybutton{space}{hint})  
        \item Change the permissions of \texttt{hello.py} to (\mybutton{permissions}{hint}):
        \begin{itemize}
            \item \texttt{rwxrwxrwx}
            \item \texttt{rw-r-----}
            \item \texttt{---rw-r--}
            \item \texttt{rwx------}
        \end{itemize}
        \item Extract group names from \texttt{/etc/group} using a combination of:
            \begin{itemize}
                \item \texttt{tail} (hint: search for \texttt{--lines} in man page)
                \item \texttt{cut} (\mybutton{cut-and-paste}{hint})
            \end{itemize}
            (hint: don't forget to look at the file first \texttt{cat /etc/group})
    \end{itemize}
\end{frame}

\begin{frame}[label=exercises-4]{Exercises (4)}
    \begin{itemize}
        \item Combine \texttt{names.txt} and \texttt{dates.txt} (\mybutton{cut-and-paste}{hint})
        \begin{itemize}
            \item columns separated by commas (hint: see man page)
            \item lines should be numbered (hint: see man page)
        \end{itemize}
        \item Make \texttt{hello.py} executable and prepend directory to \texttt{\$PATH}
        \begin{itemize}
            \item Be careful not to overwrite current \texttt{\$PATH}!
        \end{itemize}
        \item Output from \texttt{ls} is colored, why? (try \texttt{which ls})
        \begin{itemize}
            \item use an alias to make \texttt{grep}'s behavior the same.
        \end{itemize}
        \item Review the \texttt{--lines} documentation for \texttt{tail}
        \begin{itemize}
            \item Using the \texttt{+NUM} feature print the states from \texttt{states.txt}
        \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}[label=exercises-5]{Exercises (5)}
\begin{itemize}
    \item Use \texttt{tr} to remove extraneous whitespace from \texttt{states.txt}
    \item Add 1 to the 3rd column of \texttt{random.txt} using \texttt{awk}
    \item All of the ``New'' states have decided they are now ``Relatively New''.
    \begin{itemize}
        \item replace ``New'' with ``Relatively New'' using \texttt{sed} 
        \item Extra, try using capture groups (hint: Try \texttt{echo "hello" |
        sed 's|\textbackslash(hello\textbackslash)|\textbackslash1|'} on the
        command line. The ``\textbackslash( \textbackslash)'' captures what is
        inside, use \textbackslash1,\textbackslash2,\textbackslash3 etc. to
        reference captures.).
    \end{itemize}
    \item List all of the states postal codes in a \texttt{for} loop prefaced by "Postal"
    \item Append all of the \texttt{txt} files in this directory to a new file \texttt{all.txt}
\end{itemize}
\end{frame}

\begin{frame}[label=exercises-6]{Exercises (6)}
\begin{itemize}
    \item Are \texttt{ls \{1..10\}.txt} and \texttt{ls \$(seq 1 10).txt} different? Why?
    \item Set up passwordless SSH
    \item Archive the contents of \texttt{exercises} with BZIP2 compression
    \item Let's revisit the Lynyrd Skynyrd algorithm. We want our algorithm to
    work on both \texttt{names.txt,doctored.txt} but \texttt{sed} isn't
    powerful enough to do it easily (take my word for it). We need
    \texttt{perl}'s ``lookbehind'' functionality; read the first 4 sections of
    \url{http://www.regular-expressions.info/lookaround.html}. You will need to
    fill in the command \texttt{perl "<EXPRESSION>" names.txt}. Ask youself,
    \begin{itemize}
        \item What was wrong with the \texttt{sed} command?
        \item What am I trying to accomplish?
        \item What should be behind what?
        \item Why lookbehind and not lookahead?
    \end{itemize}
\end{itemize}
\end{frame}

\end{document}
